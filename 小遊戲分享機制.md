# 小遊戲分享
小遊戲社交分享機制開發共包括以下六項功能：推薦清單頁、分享、邀請、其他遊戲導流、認證、廣告。

~~所有機制皆須考量匿名狀態~~  
經過討論後，遊戲皆為登入狀態，匿名者皆會強制登入

>名詞解釋：  
>以下匿名者、登入者，皆表示於IPLAY平台中登入狀態，而非LINE登入狀態。

## 功能機制情境分析
* [遊戲推薦](#1)
* [遊戲分享](#2)
* [邀請好友](#3)
    * [CP取得好友頭像](#cp)
* [其他遊戲導流](#4)
* [用戶授權及登入](#5)
* [廣告](#6)

<span style="color:#FFC700">1.使用者在遊戲頁面時，網址上會有userID(從網址抓ID識別user?)</span>

## <span id="1">遊戲推薦</span>
1. 試玩有禮  
   系統提供熱門試玩清單，用戶點擊試玩後，CP端會發送回鐀給用戶。<span style="font-size:1.7rem;color:#FFC700">(這裡cp商會處理，我只須將user資訊傳給後端，讓後端傳給cp)</span>當用戶同意玩遊戲時，會送出有效推薦給後台做為統計數據。
2. 猜你喜歡  
   系統提供其他推薦遊戲清單，推薦其他遊戲給用戶，當用戶同意玩遊戲時，會送出有效推薦給後台做為統計數據。

* 登入者點擊試玩有禮：  
  彈出視窗確認使用者是否前往
    1. 確認  
        * 送出**登入者**點擊模版、試玩有禮遊戲資訊<span style="font-size:1.7rem;color:#FFC700"></span>
        * 將使用者導向遊戲
    2. 取消  
        * 關閉視窗不做任何行為
* 登入者點擊猜你喜歡：  
  彈出視窗確認使用者是否前往
    1. 確認
        * 送出**登入者**點擊模版、猜你喜歡遊戲資訊
        * 將使用者導向遊戲
    2. 取消
        * 關閉視窗不做任何行為

* 匿名者點擊試玩有禮：  
  彈出視窗確認使用者是否前往
    1. 確認
        * 送出**匿名者**點擊模版、試玩有禮遊戲資訊
        * 將使用者導向遊戲
    2. 取消
        * 關閉視窗不做任何行為
* 匿名者點擊猜你喜歡：  
  彈出視窗確認使用者是否前往
    1. 確認
        * 送出**匿名者**點擊模版、猜你喜歡遊戲資訊
        * 將使用者導向遊戲
    2. 取消  
        * 關閉視窗不做任何行為

## <span id="2">遊戲分享</span>
使用者可以分享該遊戲給其他用戶(Friend or OA用戶清單?)  
分享的連結頁面為轉跳頁面，帶有OG及分享者資訊
用戶分享時，會送出一次有效分享給後台，做為統計數據使用

* 登入者點擊遊戲分享：  
  送user資料。有到分享頁面時，算一次hit
    1. 製作分享連結，連結帶有bundle id與使用者id
    2. 開啟分享分頁

* 匿名者點擊遊戲分享：  
  不送user資料。有到分享頁面時，算一次hit
    1. 製作分享連結，連結帶有bundle id
    2. 開啟分享分頁

> 遊戲分享轉跳頁面，在業務流程上不相同，需與邀請好友頁面不同頁。

## <span id="3">邀請好友</span>
使用者可以分享該遊戲給其他用戶(friend or OA用戶清單)。
分享的連結頁面為轉跳頁面，帶有OG及分享者資訊。
當頁面被訪問時，會傳送訪客的資訊給CP
用戶分享時，會送出一次有效分享給後台，做為統計數據使用

* 登入者行為：
    送user資料。有到分享頁面時，算一次hit
    1. 製作分享連結，連結帶有bundle_id與user_id
    2. 開啟分享分頁
    3. 當有line好友點擊時，傳送user_id資訊給CP

* 匿名者點擊邀請好友：  --> (強制轉跳至iplay登入?)  
    不送user資料。有到分享頁面時，算一次hit
    1. 製作分享連結，連結帶有bundle_id
    2. 開啟分享分頁  

> 邀請好友轉跳頁面，在業務流程上不相同，需與遊戲分享頁面不同頁。  
> ~~匿名狀態將無法取得好友頭像~~

#### <span id="cp">CP取得好友頭像</span>
判斷用戶登入後，發送請求用戶清單資訊，取得該用戶的資訊
需開發API給CP商呼叫

## <span id="4">其他遊戲導流</span>
系統提供多至三組遊戲輪播推薦。當用戶同意玩遊戲時，會送出有效推薦給後台做為統計數據。

* 匿名者點擊Banner：  
  彈出視窗確認使用者是否前往  
    1. 確認  
        * 送出**匿名者**點擊Banner遊戲資訊
        * 將使用者導向遊戲
    2. 取消
        * 關閉視窗不做任何行為
* 登入者點擊Banner：  
  彈出視窗確認使用者是否前往  
    1. 確認  
        * 送出**登入者**點擊Banner遊戲、使用者資訊
        * 將使用者導向遊戲
    2. 取消
        * 關閉視窗不做任何行為

## <span id="5">用戶授權及登入</span>
* 匿名者點擊授權登入：  --> (強制轉跳至iplay登入?)  

* 登入者點擊授權登入：  
  1. 發送請求給裂變後台，裂變後台跟Iplay要到暱稱與大頭照之後，轉發給CP
==> 取得頭像、暱稱

## <span id="6">廣告 (暫無)</span>
* 匿名者行為：
* 登入者行為：
